!function(a,b,c,d){function e(b,c){return this.element=b,this.$element=a(b),this.moment=moment||null,this.options=a.extend({},g,c),this._defaults=g,this._name=f,null===this.options.start||null===this.options.end?(console.error("multi-timeline.js: start or end date is missing!"),!1):(this._start=moment(this.options.start),this._end=moment(this.options.end),this._end.isAfter(this._start)?(this._days=this.getDuration(this._start,this._end),this._dayPercentage=100/(this._days+1),this._timelineCount=this.options.data.length,void this.init()):(console.error("multi-timline.js: end date has to be a date after start date!"),!1))}var f="multiTimeline",g={start:null,end:null,dateFormat:"YYYY-MM-DD",unitFormat:"DD/MM",timelineSpacing:30};e.prototype={init:function(){this.createStructure().addTimelines().setDimensions()},createStructure:function(){return this.$element.addClass("tl-wrapper"),this.addMarks(),this},addMarks:function(){for(var b=this._start,c=this._end.add(1,"day"),d=a('<ul class="tl-time">'),e=-1,f=[],g="";!b.isSame(c);)e++,b=b.add(1,"day"),g=b,this._days>10&&e%2!==0&&(g=""),this.addTimeUnit(d,g,e+1),f.push(b.format(this.options.dateFormat));d.appendTo(this.$element)},addTimeUnit:function(b,c,d){moment.isMoment(c)&&(c=c.format(this.options.unitFormat)),a('<li class="tl-time__unit">').html(c).css({left:d*this._dayPercentage+"%"}).append("<span>").appendTo(b)},getDuration:function(a,b){var c=moment.duration(b.diff(a));return c.asDays()},addTimelines:function(){var b=this,c=0;return a(this.options.data).each(function(){var e=b.getDuration(moment(this.start),moment(this.end)),f=b.getDuration(moment(b.options.start),moment(this.start)),g=this.layer!==d?this.layer:c,h="",i="";0>f&&(e+=f,f=0,h="tl-overflow-left"),f+e>b._days&&(i="tl-overflow-right"),a('<div class="tl-timeline">').html('<div class="tl-timeline__title">'+this.title+"</div>").css({width:e*b._dayPercentage+"%",left:f*b._dayPercentage+"%",bottom:g*b.options.timelineSpacing+20+"px"}).addClass(h+" "+i).attr({"data-startOffset":f,"data-duration":e}).prependTo(b.$element),c++}),this},setDimensions:function(){var b=parseInt(a(".tl-timeline:first").outerHeight());this.$element.css("height",b+this._timelineCount*this.options.timelineSpacing)}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);