!function(a){function b(b,e){return this.element=b,this.$element=a(b),this.moment=moment||null,this.options=a.extend({},d,e),this._defaults=d,this._name=c,null===this.options.start||null===this.options.end?(console.error("multi-timeline.js: start or end date is missing!"),!1):(this._start=moment(this.options.start),this._end=moment(this.options.end),this._end.isAfter(this._start)?(this._days=this.getDuration(this._start,this._end),this._dayPercentage=100/(this._days+1),void this.init()):(console.error("multi-timline.js: end date has to be a date after start date!"),!1))}var c="multiTimeline",d={start:null,end:null,dateFormat:"YYYY-MM-DD",unitFormat:"DD/MM"};b.prototype={init:function(){this.createStructure().addTimelines()},createStructure:function(){return this.$element.addClass("tl-wrapper"),this.addMarks(),this},addMarks:function(){var b=this._start,c=this._end.add(1,"day"),d=a('<ul class="tl-time">'),e=-1,f=[],g="";for(this.addTimeUnit(d,b,0);!b.isSame(c);)e++,b=b.add(1,"day"),g=b,this._days>10&&e%2!==0&&(g=""),this.addTimeUnit(d,g,e+1),f.push(b.format(this.options.dateFormat));a.inArray(c.format(this.options.dateFormat),f)||this.addTimeUnit(d,c,e+1),d.appendTo(this.$element)},addTimeUnit:function(b,c,d){moment.isMoment(c)&&(c=c.format(this.options.unitFormat)),a('<li class="tl-time__unit">').html(c).css({left:d*this._dayPercentage+"%"}).append("<span>").appendTo(b)},getDuration:function(a,b){var c=moment.duration(b.diff(a));return c.asDays()},addTimelines:function(){var b=this,c=0;return a(this.options.data).each(function(){var d=b.getDuration(moment(this.start),moment(this.end)),e=b.getDuration(moment(b.options.start),moment(this.start)),f="",g="";0>e&&(d+=e,e=0,f="tl-overflow-left"),e+d>b._days&&(g="tl-overflow-right"),a('<div class="tl-timeline">').html('<div class="tl-timeline__title">'+this.title+"</div>").css({width:d*b._dayPercentage+"%",left:e*b._dayPercentage+"%",bottom:30*c+20+"px"}).addClass(f+" "+g).attr({"data-startOffset":e,"data-duration":d}).prependTo(b.$element),c++}),this}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);